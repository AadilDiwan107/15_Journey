<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mood Journal Pro</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    transition: 0.3s;
    background:#f4f6f9;
}
.dark-mode{
    background:#121212;
    color:white;
}
.card{
    border-radius:15px;
}
.entry-item{
    padding:10px;
    border-radius:10px;
    margin-bottom:10px;
    background:#eef2ff;
}
.dark-mode .entry-item{
    background:#1f1f1f;
}
.bar{
    display:inline-block;
    width:40px;
    margin:5px;
    background:#6c63ff;
    border-radius:5px;
}
.dark-mode .bar{
    background:#00c6ff;
}
</style>
</head>
<body>

<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>ğŸ§  Mood Journal Pro</h2>
        <button class="btn btn-dark" onclick="toggleDark()">ğŸŒ™ Dark Mode</button>
    </div>

    <div class="row">
        <!-- Form -->
        <div class="col-md-4">
            <div class="card p-3 shadow">
                <h5>Add Entry</h5>
                <form id="entryForm">
                    <select id="mood" class="form-select mb-2" required>
                        <option value="ğŸ˜Š Happy">ğŸ˜Š Happy</option>
                        <option value="ğŸ˜ Neutral">ğŸ˜ Neutral</option>
                        <option value="ğŸ˜¢ Sad">ğŸ˜¢ Sad</option>
                        <option value="ğŸ˜¡ Angry">ğŸ˜¡ Angry</option>
                        <option value="ğŸ˜´ Tired">ğŸ˜´ Tired</option>
                    </select>
                    <textarea id="note" class="form-control mb-2" placeholder="Write something..."></textarea>
                    <button class="btn btn-primary w-100">Save Entry</button>
                </form>
            </div>
        </div>

        <!-- Entries -->
        <div class="col-md-8">
            <div class="card p-3 shadow">
                <h5>Your Entries</h5>
                <select id="filterMood" class="form-select mb-3">
                    <option value="">All Moods</option>
                    <option value="ğŸ˜Š Happy">ğŸ˜Š Happy</option>
                    <option value="ğŸ˜ Neutral">ğŸ˜ Neutral</option>
                    <option value="ğŸ˜¢ Sad">ğŸ˜¢ Sad</option>
                    <option value="ğŸ˜¡ Angry">ğŸ˜¡ Angry</option>
                    <option value="ğŸ˜´ Tired">ğŸ˜´ Tired</option>
                </select>

                <div id="entriesList"></div>
            </div>
        </div>
    </div>

    <!-- Summary -->
    <div class="card p-3 shadow mt-4">
        <h5>ğŸ“Š Weekly Mood Summary</h5>
        <p>Total Entries: <span id="totalEntries">0</span></p>
        <div id="chart"></div>
        <hr>
        <p id="insight"></p>
    </div>

</div>

<script>

let entries = JSON.parse(localStorage.getItem("moodData")) || [];

const form = document.getElementById("entryForm");
const list = document.getElementById("entriesList");
const totalEntries = document.getElementById("totalEntries");
const chart = document.getElementById("chart");
const filterMood = document.getElementById("filterMood");
const insight = document.getElementById("insight");

function saveData(){
    localStorage.setItem("moodData", JSON.stringify(entries));
}

function loadEntries(){
    list.innerHTML="";
    let filtered = entries.filter(e => !filterMood.value || e.mood === filterMood.value);

    filtered.forEach((entry,index)=>{
        let div = document.createElement("div");
        div.className="entry-item d-flex justify-content-between align-items-center";
        div.innerHTML=`
            <div>
                <strong>${entry.mood}</strong><br>
                <small>${entry.note || "No note"}</small>
            </div>
            <button class="btn btn-sm btn-danger" onclick="deleteEntry(${index})">Delete</button>
        `;
        list.appendChild(div);
    });

    totalEntries.textContent = entries.length;
    drawChart();
}

function deleteEntry(index){
    entries.splice(index,1);
    saveData();
    loadEntries();
}

function drawChart(){
    chart.innerHTML="";
    let moods=["ğŸ˜Š","ğŸ˜","ğŸ˜¢","ğŸ˜¡","ğŸ˜´"];
    let counts={};

    moods.forEach(m=>counts[m]=0);

    entries.forEach(e=>{
        let emoji=e.mood.split(" ")[0];
        if(counts[emoji]!==undefined){
            counts[emoji]++;
        }
    });

    let highestMood="";
    let max=0;

    for(let mood in counts){
        let bar=document.createElement("div");
        bar.className="bar";
        bar.style.height=(counts[mood]*30)+"px";
        bar.title=`${mood}: ${counts[mood]}`;
        chart.appendChild(bar);

        let label=document.createElement("div");
        label.style.display="inline-block";
        label.style.width="40px";
        label.style.textAlign="center";
        label.innerText=mood;
        chart.appendChild(label);

        if(counts[mood]>max){
            max=counts[mood];
            highestMood=mood;
        }
    }

    if(max>0){
        insight.innerHTML=`You felt ${highestMood} most this week ğŸ’¡`;
    } else {
        insight.innerHTML="Start adding entries to see insights!";
    }
}

form.addEventListener("submit",function(e){
    e.preventDefault();
    let mood=document.getElementById("mood").value;
    let note=document.getElementById("note").value;

    entries.push({mood,note});
    saveData();
    form.reset();
    loadEntries();
});

filterMood.addEventListener("change",loadEntries);

function toggleDark(){
    document.body.classList.toggle("dark-mode");
}

loadEntries();

</script>

</body>
</html>
