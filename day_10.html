<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Password Manager</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
}

.card{
    border-radius:15px;
    background:rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
}

.btn-custom{
    background:#00c6ff;
    border:none;
}

.btn-custom:hover{
    background:#0072ff;
}

.password-box{
    font-weight:bold;
    letter-spacing:2px;
}
</style>
</head>

<body>

<div class="container py-5">
<h2 class="text-center mb-4">üîê Smart Password Generator</h2>

<div class="row g-4">

<div class="col-md-5">
<div class="card p-4">
<h5>Generate Password</h5>

<div class="input-group mb-3">
<input type="text" id="generatedPassword" class="form-control password-box" readonly>
<button class="btn btn-custom" onclick="generatePassword()">Generate</button>
<button class="btn btn-info" onclick="copyGenerated()">Copy</button>
</div>

<input type="text" id="accountName" class="form-control mb-2" placeholder="Enter Account Name">
<input type="text" id="customPassword" class="form-control mb-3" placeholder="Or Enter Custom Password">

<button class="btn btn-success w-100" onclick="savePassword()">Save Password</button>

</div>
</div>

<div class="col-md-7">
<div class="card p-4">
<h5>Saved Passwords</h5>
<div id="passwordList"></div>
</div>
</div>

</div>
</div>

<!-- Modal -->
<div class="modal fade" id="viewModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content bg-dark text-white">
<div class="modal-header">
<h5 class="modal-title">üîë Account Details</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<p><strong>Name:</strong> <span id="modalName"></span></p>
<p><strong>Password:</strong> <span id="modalPassword"></span></p>
<button class="btn btn-info w-100" onclick="copyModalPassword()">Copy Password</button>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>

let passwords = JSON.parse(localStorage.getItem("passwords")) || [];

function generatePassword(){
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
    let pass = "";
    for(let i=0;i<8;i++){
        pass += chars.charAt(Math.floor(Math.random()*chars.length));
    }
    document.getElementById("generatedPassword").value = pass;
}

function copyText(text){
    if(navigator.clipboard){
        navigator.clipboard.writeText(text)
        .then(()=> alert("Copied to Clipboard!"))
        .catch(()=> fallbackCopy(text));
    } else {
        fallbackCopy(text);
    }
}

function fallbackCopy(text){
    let tempInput = document.createElement("input");
    tempInput.value = text;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand("copy");
    document.body.removeChild(tempInput);
    alert("Copied to Clipboard!");
}

function copyGenerated(){
    const text = document.getElementById("generatedPassword").value;
    if(!text){
        alert("Generate password first!");
        return;
    }
    copyText(text);
}

function savePassword(){
    const name = document.getElementById("accountName").value;
    const generated = document.getElementById("generatedPassword").value;
    const custom = document.getElementById("customPassword").value;

    const finalPassword = custom || generated;

    if(!name || !finalPassword){
        alert("Please enter account name and password");
        return;
    }

    passwords.push({name, password:finalPassword});
    localStorage.setItem("passwords", JSON.stringify(passwords));

    document.getElementById("accountName").value="";
    document.getElementById("generatedPassword").value="";
    document.getElementById("customPassword").value="";

    renderPasswords();
}

function renderPasswords(){
    const list = document.getElementById("passwordList");
    list.innerHTML="";

    passwords.forEach((item,index)=>{
        list.innerHTML += `
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <span>${item.name}</span>
            <div>
                <button class="btn btn-sm btn-warning" onclick="viewPassword(${index})">View</button>
                <button class="btn btn-sm btn-danger" onclick="deletePassword(${index})">Delete</button>
            </div>
        </div>
        `;
    });
}

function viewPassword(index){
    document.getElementById("modalName").innerText = passwords[index].name;
    document.getElementById("modalPassword").innerText = passwords[index].password;

    const modal = new bootstrap.Modal(document.getElementById('viewModal'));
    modal.show();
}

function copyModalPassword(){
    const text = document.getElementById("modalPassword").innerText;
    copyText(text);
}

function deletePassword(index){
    passwords.splice(index,1);
    localStorage.setItem("passwords", JSON.stringify(passwords));
    renderPasswords();
}

renderPasswords();

</script>

</body>
</html>
